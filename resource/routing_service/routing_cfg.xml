<?xml version="1.0"?>
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://community.rti.com/schema/6.0.0/rti_routing_service.xsd">


    <!-- ================================================================= -->
    <!-- ROUTING SERVICE CONFIGURATION                                     -->
    <!-- ================================================================= -->

    <!-- THE NAME OF THE CONFIGURATION SHALL NOT BE MODIFED, is used by
        commonservice_wrapper.sh to launch the services -->
    <routing_service name="routing_service_test">

        <domain_route name="DR">
            <participant name="participant_1">
                <domain_id>0</domain_id>
                <participant_qos base_name="PerformanceLibraries_Modified::BaseProfileQos"/>
            </participant>
            <participant name="participant_2">
                <domain_id>1</domain_id>
                <participant_qos base_name="PerformanceLibraries_Modified::BaseProfileQos"/>
            </participant>

            <session name="Perftest_routing">
                <thread_pool>
                    <priority>THREAD_PRIORITY_HIGH</priority>
                </thread_pool>
                <publisher_qos base_name="PerformanceLibraries_Modified::BaseProfileQos"/>
                <subscriber_qos base_name="PerformanceLibraries_Modified::BaseProfileQos"/>

                <!-- <wait_set>
                    <max_event_count>
                        1
                    </max_event_count>
                    <max_event_delay>
                        <sec>DURATION_INFINITE_SEC</sec>
                        <nanosec>DURATION_INFINITE_NSEC</nanosec>
                    </max_event_delay>
                </wait_set> -->

                <topic_route name="Throughput">
                    <route_types>true</route_types>
                    <input participant="participant_1">
                        <creation_mode>IMMEDIATE</creation_mode>
                        <registered_type_name>$(TYPE_NAME)</registered_type_name>
                        <topic_name>Throughput</topic_name>
                        <datareader_qos base_name="PerformanceLibraries_Modified::ThroughputQos"/>
                    </input>
                    <output participant="participant_2">
                        <creation_mode>IMMEDIATE</creation_mode>
                        <registered_type_name>$(TYPE_NAME)</registered_type_name>
                        <topic_name>Throughput</topic_name>
                        <datawriter_qos base_name="PerformanceLibraries_Modified::ThroughputQos"></datawriter_qos>
                    </output>
                </topic_route>

                <topic_route name="Latency">
                    <route_types>true</route_types>
                    <input participant="participant_2">
                        <creation_mode>IMMEDIATE</creation_mode>
                        <registered_type_name>$(TYPE_NAME)</registered_type_name>
                        <topic_name>Latency</topic_name>
                        <datareader_qos base_name="PerformanceLibraries_Modified::LatencyQos"/>
                    </input>
                    <output participant="participant_1">
                        <creation_mode>IMMEDIATE</creation_mode>
                        <registered_type_name>$(TYPE_NAME)</registered_type_name>
                        <topic_name>Latency</topic_name>
                        <datawriter_qos base_name="PerformanceLibraries_Modified::LatencyQos"/>
                    </output>
                </topic_route>

                <topic_route name="Announcement">
                    <route_types>true</route_types>
                    <input participant="participant_2">
                        <creation_mode>IMMEDIATE</creation_mode>
                        <registered_type_name>$(TYPE_NAME)</registered_type_name>
                        <topic_name>Announcement</topic_name>
                        <datareader_qos base_name="PerformanceLibraries_Modified::AnnouncementQos"/>
                    </input>
                    <output participant="participant_1">
                        <creation_mode>IMMEDIATE</creation_mode>
                        <registered_type_name>$(TYPE_NAME)</registered_type_name>
                        <topic_name>Announcement</topic_name>
                        <datawriter_qos base_name="PerformanceLibraries_Modified::AnnouncementQos"/>
                    </output>
                </topic_route>
            </session>
        </domain_route>
    </routing_service>

</dds>